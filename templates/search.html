<html>
<head>
<title>
Smart Courses Selector
</title>
<link rel="stylesheet" type="text/css" href="/static/search.css"/>
<!--<script src="/static/jquery.js"></script>
<!--<script type="text/javascript" src="/static/json2.js"></script>-->
<script type="text/javascript">
/*
var majors = ""
var courses = ""
    function changeMajor(){
    majors = "Math "
    var result = document.getElementById('result')
    result.value = majors;
    }
*/    

</script>

</head>
<body>
<script type="text/javascript">
    function $(id){
      return document.getElementById(id);
    }
    
    function changeInfo(courseIn){
        {% for course in courses %}
            if (courseIn=='{{course.code}}{{course.section}}') {
                    $('info').innerHTML = "{{course.schedule}}+{{course.name}}+{{course.des}}";
            }
        {% endfor %}
    }

    function add_remove_course(div_id,name,code,section){
        var xmlhttp;
        if (window.XMLHttpRequest)
          {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
          }
        else
          {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
          }
        var test="test";
        xmlhttp.open("GET","/rpc?infor="+div_id+"&name="+name+"&code="+code+"&section="+section,true);
        xmlhttp.send();
        //xmlhttp.send("infor=test");
        xmlhttp.onreadystatechange=function()
          {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            button = document.getElementById(div_id);
            button.value = xmlhttp.responseText;
            //document.write("olala go inside");
            }
          }
    }
    
    function add_remove_course_show(div_id,name,code,section){
        var xmlhttp;
        if (window.XMLHttpRequest)
          {// code for IE7+, Firefox, Chrome, Opera, Safari
          xmlhttp=new XMLHttpRequest();
          }
        else
          {// code for IE6, IE5
          xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
          }
        var test="test";
        xmlhttp.open("GET","/srpc?infor="+div_id+"&name="+name+"&code="+code+"&section="+section,true);
        xmlhttp.send();
        //xmlhttp.send("infor=test");
        xmlhttp.onreadystatechange=function()
          {
          if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
            button = document.getElementById(div_id);
            button.value = xmlhttp.responseText;
            //document.write("olala go inside");
            }
          }
    }
</script>
{% for course in courses %}
<script type="text/javascript">
add_remove_course_show('{{account.id}}{{course.name}}{{course.code}}{{course.section}}','{{course.name}}','{{course.code}}','{{course.section}}');
</script>
{% endfor %}
<center><h1>Hello Sky</h1></center>
<a href={{logout_link}}>Log Out</a>

<p>{{account.id}}  {{account.email}}</p>
    {% for course in account.courses %}
        <p>{{course.course.name}} {{course.course.section}}</p>
    {% endfor %}

<div id="schools">
<ul>
{% for school in schools %}
<li><a href="/?school={{school.name}}" onclick="changeMajor()">{{school.name}}</a></li>
{% endfor %}
</ul>
</div>
<div id="majors">
<ul>
{% for major in majors %}
<li><a href="/?major={{major.name}}&school={{major.school}}" onclick="changeCourse()">{{major.name}}</a></li>
{% endfor %}
</ul>
</div>
<div id="courses">
<ul>
{% for course in courses %}
<li>
<input id="{{account.id}}{{course.name}}{{course.code}}{{course.section}}" type="button" onclick="add_remove_course('{{account.id}}{{course.name}}{{course.code}}{{course.section}}','{{course.name}}','{{course.code}}','{{course.section}}')" value="add" />
<div id="courseid" onclick="changeInfo('{{course.code}}{{course.section}}')">{{course.name}}</div>
</li>
{% endfor %}
</ul>
</div>
<div id="info">
<input id="result" type="text" value="" readonly="true" disabled="true" />
</div>
</body>
</html>